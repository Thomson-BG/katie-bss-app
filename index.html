<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Katie BSS - Behavior Support Specialist</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Splash Screen -->
    <div id="splashScreen" class="splash-screen">
        <div class="splash-content">
            <div class="splash-letters">
                <div class="letter letter-t">T</div>
                <div class="letter letter-i">i</div>
            </div>
            <div id="splashText" class="splash-text hidden">Thomson Innovation</div>
        </div>
        <audio id="collisionSound" preload="auto">
            <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEbBTSH0fPTgC0GH23A7+OZRQ0VZLnl4qBLCwpKoeDirWcxBz2L0+zNYyoJLm+qoY10tPzh3m2cOqGlhHmtxefc1l2Wn1WM3i/LgHWnqQXx8YeMdKuqbPqRfKdPQY/d8qiBKwjdT3aq6/PY3U7wVIa9gLWMZnxTnR/Zq6Gm5AYO6Y0qhW6vBzFi3lGIvYa9nJWPYLOg2qHY4EjvYKSKlhOOuO+CRkSHiJ+3rLKJhfSb3WFf4jhfkJSNqKqPaVqzlnakVrIzYJ2uq6eYhKfO3FWPvHl1gJOuqKVgcKvIhb6wqKqB1lOKrLm/4mGmYLqGnY5fhCyO2GaEz+K8O/2d06mgO2ijlFWdyoXvfKJN93Bz6+T9lKqKWqKV4CexFNKPg5Fg/m6D5vtZkqGdVNp3w+4wZm/L4p91lkaVfBvr4UOQZGy8zG/E6w==" type="audio/wav">
        </audio>
    </div>

    <!-- Dark Mode Toggle -->
    <div class="fixed top-4 right-4 z-50">
        <button id="darkModeToggle" class="bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 p-4 rounded-full shadow-lg transition-colors duration-200 w-14 h-14 flex items-center justify-center">
            <svg id="sunIcon" class="w-8 h-8 hidden" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.697 7.757a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 00-1.061 1.06l1.59 1.591z"/>
            </svg>
            <svg id="moonIcon" class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                <path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.98 10.503 10.503 0 01-9.694 6.46c-5.799 0-10.5-4.701-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 01.818.162z" clip-rule="evenodd"/>
            </svg>
        </button>
    </div>

    <div class="main-container">
        <!-- Main App Container -->
        <div id="app" class="relative flex flex-col min-h-screen justify-between overflow-hidden">
            
            <!-- Header -->
            <header class="flex items-center bg-white dark:bg-gray-900 p-4 pb-2 justify-between border-b border-gray-200 dark:border-gray-700">
                <button id="backBtn" class="text-gray-800 dark:text-gray-200 flex size-12 items-center justify-center hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                        <path d="M224,128a8,8,0,0,1-8,8H59.31l58.35,58.34a8,8,0,0,1-11.32,11.32l-72-72a8,8,0,0,1,0-11.32l72-72a8,8,0,0,1,11.32,11.32L59.31,120H216A8,8,0,0,1,224,128Z"></path>
                    </svg>
                </button>
                
                <!-- App Logo and Title -->
                <div class="flex-1 flex items-center justify-center gap-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-pink-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-lg">
                        üíù
                    </div>
                    <h1 id="pageTitle" class="text-gray-800 dark:text-gray-200 text-lg font-bold leading-tight">Katie's BSS</h1>
                </div>
                
                <div class="flex w-12 items-center justify-end">
                    <div class="relative">
                        <button id="addBtn" class="flex items-center justify-center rounded-full h-12 bg-transparent text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors p-0">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                                <path d="M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"></path>
                            </svg>
                        </button>
                        <button id="exportBtn" class="flex items-center justify-center rounded-full h-8 w-8 bg-transparent text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors ml-2" title="Export Data">
                            üì•
                        </button>
                    </div>
                </div>
            </header>

            <!-- Main Content Area -->
            <main id="mainContent" class="flex-1 overflow-y-auto">
                <!-- Dashboard View (Default) -->
                <div id="dashboardView" class="page-view">
                    <div class="p-4">
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-200 mb-6">Dashboard</h2>
                        
                        <!-- Quick Stats -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800">
                                <h3 class="text-blue-800 dark:text-blue-200 font-semibold">Total Students</h3>
                                <p id="totalStudents" class="text-2xl font-bold text-blue-600 dark:text-blue-400">0</p>
                            </div>
                            <div class="bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800">
                                <h3 class="text-green-800 dark:text-green-200 font-semibold">Active Plans</h3>
                                <p id="activePlans" class="text-2xl font-bold text-green-600 dark:text-green-400">0</p>
                            </div>
                            <div class="bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800">
                                <h3 class="text-yellow-800 dark:text-yellow-200 font-semibold">Recent Interactions</h3>
                                <p id="recentInteractions" class="text-2xl font-bold text-yellow-600 dark:text-yellow-400">0</p>
                            </div>
                        </div>

                        <!-- Recent Activity -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4">Recent Activity</h3>
                            
                            <!-- Quick Search -->
                            <div class="mb-4">
                                <input 
                                    type="text" 
                                    id="globalSearch" 
                                    placeholder="üîç Quick search across students, interactions, and notes..." 
                                    class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                >
                            </div>
                            
                            <div id="recentActivityList" class="space-y-3">
                                <!-- Activity items will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Students View -->
                <div id="studentsView" class="page-view hidden">
                    <div class="p-4">
                        <!-- Search Bar -->
                        <div class="mb-4">
                            <input 
                                type="text" 
                                id="studentSearch" 
                                placeholder="Search students..." 
                                class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            >
                        </div>

                        <!-- Students List -->
                        <div id="studentsList" class="space-y-3">
                            <!-- Students will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Student Profile View -->
                <div id="studentProfileView" class="page-view hidden">
                    <!-- Profile content will be populated by JavaScript -->
                </div>

                <!-- Log Interaction View -->
                <div id="logInteractionView" class="page-view hidden">
                    <div class="p-4">
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-200 mb-6">Log New Interaction</h2>
                        
                        <form id="interactionForm" class="space-y-4">
                            <div>
                                <label for="studentSelect" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Student</label>
                                <select id="studentSelect" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200">
                                    <option value="">Select a student...</option>
                                </select>
                            </div>

                            <div>
                                <label for="interactionType" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Interaction Type</label>
                                <select id="interactionType" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200">
                                    <option value="">Select type...</option>
                                    <option value="behavioral-incident">Behavioral Incident</option>
                                    <option value="counseling-session">Counseling Session</option>
                                    <option value="parent-meeting">Parent Meeting</option>
                                    <option value="academic-support">Academic Support</option>
                                    <option value="check-in">Check-in</option>
                                </select>
                            </div>

                            <div>
                                <label for="severityLevel" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Severity Level</label>
                                <select id="severityLevel" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200">
                                    <option value="no-flag">üü¢ No Flag - Routine</option>
                                    <option value="green-flag">üü¢ Green Flag - Positive</option>
                                    <option value="yellow-flag">üü° Yellow Flag - Caution</option>
                                    <option value="red-flag">üî¥ Red Flag - Urgent</option>
                                </select>
                            </div>

                            <div>
                                <label for="interactionDate" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Date</label>
                                <input type="date" id="interactionDate" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200">
                            </div>

                            <div>
                                <label for="interactionNotes" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Notes</label>
                                <textarea id="interactionNotes" rows="6" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200" placeholder="Enter interaction details..."></textarea>
                            </div>

                            <div class="flex gap-3">
                                <button type="submit" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors">
                                    Save Interaction
                                </button>
                                <button type="button" id="cancelInteraction" class="flex-1 bg-gray-300 hover:bg-gray-400 dark:bg-gray-600 dark:hover:bg-gray-700 text-gray-800 dark:text-gray-200 font-medium py-3 px-4 rounded-lg transition-colors">
                                    Cancel
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Reports View -->
                <div id="reportsView" class="page-view hidden">
                    <div class="p-4">
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-200 mb-6">Reports & Analytics</h2>
                        
                        <!-- Report Filters -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-6">
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4">Filters</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <label for="reportDateRange" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Date Range</label>
                                    <select id="reportDateRange" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200">
                                        <option value="7">Last 7 days</option>
                                        <option value="30">Last 30 days</option>
                                        <option value="90">Last 90 days</option>
                                        <option value="365">Last year</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="reportStudent" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Student</label>
                                    <select id="reportStudent" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200">
                                        <option value="">All students</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="reportType" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Interaction Type</label>
                                    <select id="reportType" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200">
                                        <option value="">All types</option>
                                        <option value="behavioral-incident">Behavioral Incidents</option>
                                        <option value="counseling-session">Counseling Sessions</option>
                                        <option value="parent-meeting">Parent Meetings</option>
                                        <option value="academic-support">Academic Support</option>
                                        <option value="check-in">Check-ins</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Report Results -->
                        <div id="reportResults" class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">Report Results</h3>
                                <div class="flex gap-2">
                                    <button onclick="app.downloadReport('txt')" class="btn-secondary text-sm px-3 py-2" title="Download as TXT">
                                        üìÑ TXT
                                    </button>
                                    <button onclick="app.downloadReport('pdf')" class="btn-secondary text-sm px-3 py-2" title="Download as PDF">
                                        üìï PDF
                                    </button>
                                    <button onclick="app.downloadReport('docx')" class="btn-secondary text-sm px-3 py-2" title="Download as DOCX">
                                        üìò DOCX
                                    </button>
                                    <button onclick="app.downloadReport('xlsx')" class="btn-secondary text-sm px-3 py-2" title="Download as XLSX">
                                        üìä XLSX
                                    </button>
                                </div>
                            </div>
                            <div id="reportContent">
                                <!-- Report content will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </main>

            <!-- Bottom Navigation -->
            <nav class="border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-4 pb-3 pt-2">
                <div class="flex gap-2">
                    <button class="nav-btn flex flex-1 flex-col items-center justify-end gap-1 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors" data-view="dashboard">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256" class="h-6 w-6">
                            <path d="M218.83,103.77l-80-75.48a1.14,1.14,0,0,1-.11-.11,16,16,0,0,0-21.53,0l-.11.11L37.17,103.77A16,16,0,0,0,32,115.55V208a16,16,0,0,0,16,16H96a16,16,0,0,0,16-16V160h32v48a16,16,0,0,0,16,16h48a16,16,0,0,0,16-16V115.55A16,16,0,0,0,218.83,103.77ZM208,208H160V160a16,16,0,0,0-16-16H112a16,16,0,0,0-16,16v48H48V115.55l.11-.1L128,40l79.9,75.43.11.1Z"></path>
                        </svg>
                        <span class="text-xs font-medium">Dashboard</span>
                    </button>
                    
                    <button class="nav-btn flex flex-1 flex-col items-center justify-end gap-1 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors" data-view="logInteraction">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256" class="h-6 w-6">
                            <path d="M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32Zm0,176H48V48H208V208Zm-32-80a8,8,0,0,1-8,8H136v32a8,8,0,0,1-16,0V136H88a8,8,0,0,1,0-16h32V88a8,8,0,0,1,16,0v32h32A8,8,0,0,1,176,128Z"></path>
                        </svg>
                        <span class="text-xs font-medium">Log Interaction</span>
                    </button>
                    
                    <button class="nav-btn flex flex-1 flex-col items-center justify-end gap-1 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors" data-view="students">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256" class="h-6 w-6">
                            <path d="M164.47,195.63a8,8,0,0,1-6.7,12.37H10.23a8,8,0,0,1-6.7-12.37,95.83,95.83,0,0,1,47.22-37.71,60,60,0,1,1,66.5,0A95.83,95.83,0,0,1,164.47,195.63Zm87.91-.15a95.87,95.87,0,0,0-47.13-37.56A60,60,0,0,0,144.7,54.59a4,4,0,0,0-1.33,6A75.83,75.83,0,0,1,147,150.53a4,4,0,0,0,1.07,5.53,112.32,112.32,0,0,1,29.85,30.83,23.92,23.92,0,0,1,3.65,16.47,4,4,0,0,0,3.95,4.64h60.3a8,8,0,0,0,7.73-5.93A8.22,8.22,0,0,0,252.38,195.48Z"></path>
                        </svg>
                        <span class="text-xs font-medium">Students</span>
                    </button>
                    
                    <button class="nav-btn flex flex-1 flex-col items-center justify-end gap-1 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors" data-view="reports">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256" class="h-6 w-6">
                            <path d="M216,40H136V24a8,8,0,0,0-16,0V40H40A16,16,0,0,0,24,56V176a16,16,0,0,0,16,16H79.36L57.75,219a8,8,0,0,0,12.5,10l29.59-37h56.32l29.59,37a8,8,0,1,0,12.5-10l-21.61-27H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,136H40V56H216V176ZM104,120v24a8,8,0,0,1-16,0V120a8,8,0,0,1,16,0Zm32-16v40a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm32-16v56a8,8,0,0,1-16,0V88a8,8,0,0,1,16,0Z"></path>
                        </svg>
                        <span class="text-xs font-medium">Reports</span>
                    </button>
                </div>
            </nav>

            <!-- Footer -->
            <footer class="bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 py-4 px-4">
                <div class="flex flex-col items-center gap-2">
                    <!-- Thomson Innovations Logo placeholder -->
                    <div class="w-12 h-12 bg-gray-800 dark:bg-gray-300 rounded-lg flex items-center justify-center font-bold text-white dark:text-gray-800">
                        <span class="text-lg">Ti</span>
                    </div>
                    <div class="text-center">
                        <p class="text-sm font-medium text-gray-700 dark:text-gray-300">Thomson Innovations</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400">All rights reserved 2025</p>
                    </div>
                </div>
            </footer>
        </div>

        <!-- Modal for Adding New Student -->
        <div id="addStudentModal" class="hidden fixed inset-0 modal-backdrop flex items-center justify-center z-50">
            <div class="bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4">Add New Student</h3>
                <form id="addStudentForm" class="space-y-4">
                    <div>
                        <label for="studentName" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Student Name</label>
                        <input type="text" id="studentName" required>
                    </div>
                    <div>
                        <label for="studentGrade" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Grade</label>
                        <select id="studentGrade" required>
                            <option value="">Select grade...</option>
                            <option value="K">Kindergarten</option>
                            <option value="1">Grade 1</option>
                            <option value="2">Grade 2</option>
                            <option value="3">Grade 3</option>
                            <option value="4">Grade 4</option>
                            <option value="5">Grade 5</option>
                            <option value="6">Grade 6</option>
                            <option value="7">Grade 7</option>
                            <option value="8">Grade 8</option>
                            <option value="9">Grade 9</option>
                            <option value="10">Grade 10</option>
                            <option value="11">Grade 11</option>
                            <option value="12">Grade 12</option>
                        </select>
                    </div>
                    <div>
                        <label for="studentId" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Student ID</label>
                        <input type="text" id="studentId" required>
                    </div>
                    <div class="flex gap-3 pt-4">
                        <button type="submit" class="btn-primary flex-1">
                            Add Student
                        </button>
                        <button type="button" id="cancelAddStudent" class="btn-secondary flex-1">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>

    <script src="script.js"></script>
</body>
</html>